# Azure Functions ‚Äúquickstart‚Äù

This is an obedient walk through ‚Äú[Quickstart: Create a C# function in Azure using Visual Studio Code](https://docs.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-csharp?tabs=in-process)‚Äù which can be useful for beginners (of course) and for the more experienced to see how Microsoft is introducing Azure Functions.

The only independent steps I am going to take are:

## installing Azurite on Ubuntu

The `npm`-based installation [üìñ [docs](https://github.com/azure/azurite#npm)] of `azurite` is straight forward.

## installing the Azurite Visual Studio Code extension

The Azurite Visual Studio Code [extension](https://marketplace.visualstudio.com/items?itemName=Azurite.azurite) allows us to control `azurite` from VS Code. The following table summarizes an Azurite lifecycle in terms of extension commands:

| VSCode extension command | remarks
|- |-
| **Azurite: Start** | Start `azurite` in the current VSCode folder.<sup>1</sup>
| **Azurite: Close** | Should stop all `azurite` services.
| **Azurite: Clean** | Should delete almost all `azurite` folders generated by **Azurite: Start**.

---

<sup>1</sup> <small>The `azurite.location` VSCode setting should control where **Azurite: Start** writes to disk; however, Visual Studio on Windows may ignore/override these settings during debug.</small>

## generating the local project under my folder of choice

My folder of choice is the [`dotnet-azure-functions-quickstart`](../dotnet-azure-functions-quickstart) folder (in this repo) where the instructions under ‚Äú[Create your local project](https://docs.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-csharp?tabs=in-process#create-an-azure-functions-project)‚Äù are followed.

## being aware that VSCode `tasks.json` file is changed by **Create New Project‚Ä¶** wizard

This is an example of what is added to `tasks.json` while stepping through the ‚Äú[Create your local project](https://docs.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-csharp?tabs=in-process#create-an-azure-functions-project)‚Äù wizard:

```json
{
    "label": "clean",
    "command": "dotnet",
    "args": [
        "clean",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "label": "build",
    "command": "dotnet",
    "args": [
        "build",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "dependsOn": "clean",
    "group": {
        "kind": "build",
        "isDefault": true
    },
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "label": "clean release",
    "command": "dotnet",
    "args": [
        "clean",
        "--configuration",
        "Release",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "label": "publish",
    "command": "dotnet",
    "args": [
        "publish",
        "--configuration",
        "Release",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "dependsOn": "clean release",
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "label": "clean (functions)",
    "command": "dotnet",
    "args": [
        "clean",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "label": "build (functions)",
    "command": "dotnet",
    "args": [
        "build",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "dependsOn": "clean (functions)",
    "group": {
        "kind": "build",
        "isDefault": true
    },
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "label": "clean release (functions)",
    "command": "dotnet",
    "args": [
        "clean",
        "--configuration",
        "Release",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "label": "publish (functions)",
    "command": "dotnet",
    "args": [
        "publish",
        "--configuration",
        "Release",
        "/property:GenerateFullPaths=true",
        "/consoleloggerparameters:NoSummary"
    ],
    "type": "process",
    "dependsOn": "clean release (functions)",
    "problemMatcher": "$msCompile",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions"
    }
},
{
    "type": "func",
    "dependsOn": "build (functions)",
    "options": {
        "cwd": "${workspaceFolder}/dotnet-azure-functions-quickstart/My.Functions/bin/Debug/net6.0"
    },
    "command": "host start",
    "isBackground": true,
    "problemMatcher": "$func-dotnet-watch"
}
```

The F5-debugging experience in Visual Studio Code actually depends on these tasks (specifically, `"command": "host start"`) which makes me concerned about stepping through the ‚Äú[Create your local project](https://docs.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-csharp?tabs=in-process#create-an-azure-functions-project)‚Äù wizard intending to support multiple Azure Functions projects in the same parent directory (with `/.vscode/` at the root).

## adding a `*.sln` file

A `*.sln` file is needed for the [OmniSharp](https://www.omnisharp.net/) **Select Project** command). From the `dotnet-azure-functions-quickstart/` [directory](../dotnet-azure-functions-quickstart):

```bash
dotnet new sln -n My.Functions

dotnet sln My.Functions.sln \
    add My.Functions/My.Functions.csproj
```

## using `curl` to test against the local server

The following `curl` command is a lightweight way to hit breakpoints during the F5, debugging experience:

```shell
$> curl http://localhost:7071/api/HttpExample?name=yup

Hello, yup. This HTTP triggered function executed successfully.

```

@[BryanWilhite](https://twitter.com/BryanWilhite)
